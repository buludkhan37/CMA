<div class="dashboard-container">
    <nav class="sidebar" [class.collapsed]="sidebarCollapsed()">
        <div class="sidebar-header">
            <div class="header-top">
                @if (!sidebarCollapsed()) {
                    <h2>Панель управления</h2>
                }
                <button
                    title="{{ sidebarCollapsed() ? 'Развернуть панель' : 'Свернуть панель' }}"
                    class="btn-toggle"
                    (click)="toggleSidebar()"
                >
                    <svg
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <line x1="3" y1="6" x2="21" y2="6" />
                        <line x1="3" y1="12" x2="21" y2="12" />
                        <line x1="3" y1="18" x2="21" y2="18" />
                    </svg>
                </button>
            </div>
            @if (currentUser()) {
                <div class="user-info">
                    @if (!sidebarCollapsed()) {
                        <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            class="user-avatar-icon"
                        >
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                            <circle cx="12" cy="7" r="4" />
                        </svg>
                        <span class="user-name">{{ currentUser()?.login }}</span>
                    }
                    <button
                        class="btn-logout"
                        [title]="sidebarCollapsed() ? currentUser()?.login + ' - Выход' : 'Выход'"
                        (click)="logout()"
                    >
                        <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                            <polyline points="16,17 21,12 16,7" />
                            <line x1="21" y1="12" x2="9" y2="12" />
                        </svg>
                    </button>
                </div>
            }
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <button
                    class="nav-link"
                    [class.active]="isActiveRoute('clients')"
                    [title]="sidebarCollapsed() ? 'Клиенты' : ''"
                    (click)="setActiveRoute('clients')"
                >
                    <svg
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                        <circle cx="8.5" cy="7" r="4" />
                        <path d="m15 14 4 4" />
                        <path d="M19 14v4h-4" />
                    </svg>
                    @if (!sidebarCollapsed()) {
                        <span>Клиенты</span>
                    }
                </button>
            </li>

            <li class="nav-item">
                <button
                    class="nav-link"
                    [class.active]="isActiveRoute('create-client')"
                    [title]="sidebarCollapsed() ? 'Добавить клиента' : ''"
                    (click)="setActiveRoute('create-client')"
                >
                    <svg
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                        <line x1="19" y1="8" x2="19" y2="14" />
                        <line x1="22" y1="11" x2="16" y2="11" />
                    </svg>
                    @if (!sidebarCollapsed()) {
                        <span>Добавить клиента</span>
                    }
                </button>
            </li>
        </ul>
    </nav>

    <main class="main-content" [class.sidebar-collapsed]="sidebarCollapsed()">
        <div class="content-header">
            @if (isActiveRoute('clients')) {
                <h1>Список клиентов</h1>
            }
            @if (isActiveRoute('create-client')) {
                <h1>Создание клиента</h1>
            }
        </div>

        <div class="content-body">
            <router-outlet></router-outlet>
        </div>
    </main>
</div>
